<!DOCTYPE html>
<html lang="en">
	<head>
		<title>{{ title }} | Binsta</title>
		<!-- Required meta tags -->
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

		<!-- Bootstrap CSS v5.2.1 -->
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
			crossorigin="anonymous" />
		<link
			rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css" />
		<link href="https://fonts.cdnfonts.com/css/freestyle-script" rel="stylesheet" />
		<link rel="stylesheet" href="../../styles/css/style.css" />
		<link rel="stylesheet" href="../../styles/css/prism.css" />
		<link rel="icon" type="image/x-icon" href="/assets/icons/favicon.ico" />
	</head>

	<body>
		<script src="../../assets/js/prism.js"></script>
		<header>
			<nav class="navbar navbar-expand-lg p-0 shadow-sm bg-dark">
				<div class="container-fluid gx-5">
					<!-- Brand Logo and Name -->
					<div class="nav-img my-2">
						<a href="/" class="navbar-brand logo text-decoration-none m-0">
							<h1 class="logo-nav m-0">Binsta</h1>
						</a>
					</div>

					<button
						class="navbar-toggler"
						type="button"
						data-bs-toggle="collapse"
						data-bs-target="#navbarNav"
						aria-controls="navbarNav"
						aria-expanded="false"
						aria-label="Toggle Navigation">
						<span class="navbar-toggler-icon"></span>
					</button>

					<div
						class="collapse navbar-collapse d-lg-flex justify-content-lg-between pt-3 pb-4 py-lg-0"
						id="navbarNav">
						<div class="search-bar mx-auto my-auto mb-3 mb-lg-0">
							<form
								class="d-flex align-items-center border-0 rounded-3 py-2 px-3 bg-secondary"
								role="search"
								action="/search"
								method="get">
								<i class="bi bi-search"></i>
								<input
									class="form-control border-0 rounded-3 py-0 ps-2 pe-0 bg-secondary"
									name="search"
									type="search"
									placeholder="Search"
									aria-label="Search"
									value="{{ searchTerm|default('') }}" />
							</form>
						</div>
						<div class="links h-auto my-auto">
							<div class="d-flex flex-column flex-lg-row gap-3">
								<hr class="d-lg-none" />
								<div class="d-flex justify-content-center gap-3">
									<a href="/feed" class="text-decoration-none d-flex align-items-center">
										{% if activeController == 'feed' %}
										<img
											src="/assets/icons/light/home-fill.png"
											alt="Home active"
											id="feed-icon"
											class="nav-icon theme-icon" />
										{% else %}
										<img
											src="/assets/icons/light/home.png"
											alt="Home"
											class="nav-icon theme-icon" />
										{% endif %}
										<span class="d-lg-none ms-2" id="feed-icon-text">Feed</span>
									</a>
									<a href="/snippet/create" class="text-decoration-none d-flex align-items-center">
										{% if activeController == 'create' %}
										<img
											src="/assets/icons/light/add-fill.png"
											alt="Add active"
											id="create-icon"
											class="nav-icon theme-icon" />
										{% else %}
										<img src="/assets/icons/light/add.png" alt="Add" class="nav-icon theme-icon" />
										{% endif %}
										<span class="d-lg-none ms-2" id="create-icon-text">Create</span>
									</a>
									{% if user %}
									<div class="dropdown user-dropdown">
										<button
											class="btn border-0 bg-transparent dropdown-toggle p-0"
											data-bs-toggle="dropdown"
											aria-expanded="false">
											{% if userProfile.pfp %}
											<img
												src="/assets/uploads/{{ userProfile.pfp }}"
												alt="user"
												class="nav-icon theme-icon rounded-circle" />
											{% else %}
											<img
												src="/assets/icons/light/profile-user.png"
												alt="user"
												class="nav-icon theme-icon" />
											{% endif %}
										</button>
										<ul class="dropdown-menu dropdown-menu-end user-dropdown-menu bg-dark">
											<li>
												<p class="dropdown-item m-0 fw-bold text-black disabled">
													{{ userProfile.username }}
												</p>
											</li>
											<li>
												<a href="/user/profile/{{ userProfile.id }}" class="dropdown-item"
													>Profile</a
												>
											</li>
											<li><a href="/auth/logout" class="dropdown-item">Logout</a></li>
										</ul>
									</div>
									{% endif %}
								</div>
								<hr class="d-lg-none" />
								<div class="vr d-none d-lg-block"></div>
								<div class="dropdown d-flex align-items-center justify-content-center">
									<button
										class="btn btn-link nav-link dropdown-toggle d-flex align-items-center"
										id="bd-theme"
										type="button"
										aria-expanded="false"
										data-bs-toggle="dropdown"
										data-bs-display="static"
										aria-label="Toggle theme (auto)">
										<i class="bi bi-circle-half theme-icon-active"></i>
										<span class="d-lg-none ms-2" id="bd-theme-text">Toggle theme</span>
									</button>
									<ul class="dropdown-menu dropdown-menu-end bg-dark" aria-labelledby="bd-theme-text">
										<li>
											<button
												type="button"
												class="dropdown-item d-flex align-items-center"
												data-bs-theme-value="light"
												aria-pressed="false">
												<i class="bi bi-sun-fill theme-icon me-2"></i>
												Light
											</button>
										</li>
										<li>
											<button
												type="button"
												class="dropdown-item d-flex align-items-center"
												data-bs-theme-value="dark"
												aria-pressed="false">
												<i class="bi bi-moon-stars-fill theme-icon me-2"></i>
												Dark
											</button>
										</li>
										<li>
											<button
												type="button"
												class="dropdown-item d-flex align-items-center active"
												data-bs-theme-value="auto"
												aria-pressed="true">
												<i class="bi bi-circle-half theme-icon me-2"></i>
												Auto
											</button>
										</li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
			</nav>
		</header>
		<button
			onclick="topFunction()"
			class="d-none position-fixed z-1 border-0 cursor-pointer p-4 rounded-0 fs-4"
			id="btn-top"
			title="Back to top">
			<i class="bi bi-arrow-up"></i>
		</button>
		<main class="mx-auto w-75">{% block content %}{% endblock %}</main>
		<footer>
			<!-- place footer here -->
		</footer>
		<!-- Bootstrap JavaScript Libraries -->
		<script
			src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
			integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
			crossorigin="anonymous"></script>

		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
			integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
			crossorigin="anonymous"></script>
		<script src="../../assets/js/theme.js"></script>
		<script>
			let mybutton = document.getElementById("btn-top");

			window.onscroll = function () {
				scrollFunction();
			};

			function scrollFunction() {
				if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
					mybutton.classList.remove("d-none");
					mybutton.classList.add("d-block");
				} else {
					mybutton.classList.remove("d-block");
					mybutton.classList.add("d-none");
				}
			}

			function topFunction() {
				document.body.scrollTop = 0;
				document.documentElement.scrollTop = 0;
			}
		</script>
		{% block script %} {% endblock %}
	</body>
</html>
